<script type="text/javascript">
    function generateUUID() { // Public Domain/MIT
      var d = new Date().getTime();
      if (typeof performance !== 'undefined' && typeof performance.now === 'function'){
          d += performance.now(); //use high-precision timer if available
      }
      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
          var r = (d + Math.random() * 16) % 16 | 0;
          d = Math.floor(d / 16);
          return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);
      });
    }
    RED.nodes.registerType('alexa-local',{
        category: 'Alexa',
        color: '#3FADB5',
        defaults: {
            name: {value:""},
            devicename: {value:"", required:true},
            dimmable: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "alexa-local.png",
        label: function() {
            return this.devicename||"alexa-device";
        }
    });
</script>

<script type="text/x-red" data-template-name="alexa-local">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-devicename"><i class="icon-tag"></i> Device Name</label>
        <input type="text" id="node-input-devicename" placeholder="Ceiling light">
    </div>
    <div class="form-tips"><b>Note:</b> You will be using this Device Name to interact with Alexa. This has to be unique for each device.</div>

    <div class="form-row">
        <label for="node-input-dimmable"><i class="icon-sliders"></i> Dimmable</label>
        <input type="checkbox" id="node-input-dimmable">
    </div>
</script>

<script type="text/x-red" data-help-name="alexa-local">
    <p>A simple node that converts the message payloads into all lower-case characters</p>
    <p>Note that this Node ID is used to uniquely identify &amps; persist each device seen by Alexa or Google Home. If you delete and re-create this Node, the device is no longer the same. You would need to forget old device in Alexa app.</p>
    <h3>Outputs</h3>
       <dl class="message-properties">
         <dt>payload
             <span class="property-type">string | on/off</span>
         </dt>
         <dd> on/off trigger from Alexa </dd>
         <dt class="optional">brightness <span class="property-type">float</span></dt>
         <dd> value ranges from 0.0 to 100.0. Use this property to get the variable level from dimming command such as "Alexa, dim the light to 49%".</dd>
      </dl>
</script>
